import React,{useState}from"react";import InputField from"./InputField.js";import TextAreaField from"./TextAreaField.js";import Button from"./Button.js";import{inputValidation}from"../../../scripts/inputValidation.js";import{showNotification}from"./showNotification.js";export default function FormContact({csrf_token:e}){const[t,a]=useState(!1),[n,i]=useState(!1),[o,s]=useState({name:null,email:null,message:null}),[m,r]=useState({name:"",email:"",message:""}),l=e=>{e.preventDefault();const t=inputValidation.name(m.name),a=inputValidation.email(m.email),n=inputValidation.message(m.message);s({...o,name:t,email:a,message:n}),t||a||n||(i(!0),c(m))},c=async t=>{a(!0),await fetch("/contact",{method:"POST",body:JSON.stringify({...t,csrf_token:e})}).then(e=>e.json()).then(e=>{e.success?showNotification("Votre message a été envoyé, vous serez rapidement contacté"):(showNotification(e.error),a(!1)),i(!1)}).catch(e=>{showNotification("erreur : "+e),a(!1),i(!1)})},d=e=>{e=e.trim(),s({...o,name:inputValidation.name(e)}),r({...m,name:e})},u=e=>{e=e.trim(),s({...o,email:inputValidation.email(e)}),r({...m,email:e})},p=e=>{e=e.trim(),s({...o,message:inputValidation.message(e)}),r({...m,message:e})};return React.createElement("form",{onSubmit:l,className:"mt-4"},React.createElement("div",{className:"flex gap-4 max-md:flex-col mb-4"},React.createElement(InputField,{disabled:t,type:"text",label:"nom",id:"name",error:o.name,onChange:d}),React.createElement(InputField,{disabled:t,type:"text",label:"adresse e-mail",id:"email",error:o.email,onChange:u})),React.createElement(TextAreaField,{disabled:t,label:"message",id:"message",error:o.message,onChange:p}),React.createElement("div",{className:"flex gap-4 mt-4 max-md:flex-col"},React.createElement("label",{className:"flex gap-2 items-start text-xs cursor-pointer"},React.createElement("input",{required:!0,type:"checkbox",name:"checkbox consent  ",id:"checkbox"})," ","En cochant cette case, je consens à ce que mes données soient utilisées pour me recontacter au sujet de ma demande et ne seront ni stockées ni partagées avec des tiers, voir politique de confidentialité."),React.createElement(Button,{disabled:t,className:"bg-button"},n?React.createElement("svg",{className:"mx-auto text-2xl",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},React.createElement("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:"0.5"}),React.createElement("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},React.createElement("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"}))):"Envoyer")))}