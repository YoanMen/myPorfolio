import React,{useState,useEffect,useRef}from"react";import SelectItem from"./SelectItem.js";export default function Technologies({error:e,value:t,selectedTechnologies:a,onChange:n}){const[c,l]=useState(!1),[o,r]=useState([]),i=useRef(null);useEffect(()=>{s()},[]),useEffect(()=>{if(0!==o.length&&t.length>0){let e=[];for(let a of t){const t=o.find(e=>e.id==a.id);if(!t)return;e.push(t)}n(e)}},[o]);const s=async()=>{const e=await fetch("/technology"),t=await e.json();r(t)},u=e=>{const t=[];return e.forEach(e=>{a.find(t=>t.id==e.id)||t.push(React.createElement("option",{value:e.id},e.name))}),0==t.length&&t.push(React.createElement("option",{value:""},"aucune technologie")),t},m=()=>{if(""==i.current.value)return;const e=o.find(e=>e.id==i.current.value);n([...a,e])},f=e=>{n(a.filter(t=>t.id!=e))},d=e=>e.map(e=>React.createElement(SelectItem,{id:e.id,name:e.name,icon:e.svg,onClick:()=>f(e.id)})),h=()=>{l(!c)};return React.createElement("div",null,React.createElement("label",{htmlFor:"container",className:"flex flex-col gap-2 mb-2 w-full text-sm font-medium"},"technologies"),!c&&React.createElement("button",{onClick:h,className:"hover:text-button"},"+ ajouter une technologie"),c&&React.createElement("div",{className:"flex gap-4  max-sm:flex-col"},React.createElement("select",{ref:i,name:"technologie",id:"technologie",className:"max-w-40 w-full h-10 bg-primary border-stroke border-[1px] rounded-md px-4"},u(o)),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"hover:text-button  transition-colors duration-200 ease-in-out",onClick:()=>{m(),h()}},"confirmer"),React.createElement("button",{className:"hover:text-button opacity-50 transition-colors duration-200 ease-in-out",onClick:h},"annuler"))),a&&React.createElement("div",{className:"flex flex-wrap w-full gap-2 mt-4"},d(a)),e&&React.createElement("small",{className:"text-red "},"Vous devez ajouter au moins une technologie"))}